<!-- maps/templates/maps/get_location.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <!-- site metas -->
    <title>ReportSafer | Get Location</title>
    <link
      rel="icon"
      href="{% static 'images/logo2.jpg' %}"
      type="image/x-icon"
    />
    {% comment %}
    <link rel="icon" href="https://www.w3docs.com/favicon.ico" />
    {% endcomment %}
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- bootstrap css -->
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/bootstrap.min.css' %}"
    />
    <!-- style css -->
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'css/style.css' %}"
    />
    <!-- Responsive-->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}" />
    <!-- fevicon -->
    <link
      rel="icon"
      href="{% static 'images/fevicon.png' %}"
      type="image/gif"
    />
    <!-- Scrollbar Custom CSS -->
    <link
      rel="stylesheet"
      href="{% static 'css/jquery.mCustomScrollbar.min.css' %}"
    />
    <!-- Tweaks for older IEs-->
    <link
      rel="stylesheet"
      href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"
    />
    <!-- fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap"
      rel="stylesheet"
    />
    <!-- owl stylesheets -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css"
      rel="stylesheet"
    />
    <!-- Link to Font Awesome CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <style>

      /* Reset some default styles */
      body, h1 {
          font-family: 'Poppins', sans-serif;
          margin: 0;
          padding: 0;
          background-image: {% static 'images/bg.jpg' %};
          background-size: cover;
          background-repeat: no-repeat;
          background-attachment: fixed;
      }

      form {

          max-width: 1000px;
          margin: 0 auto;
          padding: 20px;
          background-color: #d8e1e8; /* Adjust opacity here */
          border: 1px solid #ccc;
          border-radius: 5px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      #reportform{
          margin-top:100px;
          margin-bottom:10px;
      }

      /* Apply some basic styling to the form */
      form {
          max-width: 1000px;
          margin: 0 auto;
          padding: 20px;
          background-color: #b2cbde;
          border: 1px solid #ccc;
          border-radius: 5px;
          box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      /* Style form headings */
      h1 {
          text-align: center;
          color: #333;
      }

      /* Style form labels */
      label {
          display: block;
          font-weight: bold;
          margin-top: 10px;
      }

      /* Style form input fields and text area */
      input[type="text"],
      input[type="date"],
      input[type="time"],
      textarea {
          width: 100%;
          padding: 10px;
          margin-bottom: 10px;
          border: 1px solid #ccc;
          border-radius: 4px;
          font-size: 16px;
      }

      /* Style the submit button */
      button[type="submit"] {
          background-color: #007bff;
          color: #fff;
          border: none;
          padding: 10px 20px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          margin-left:40%;
      }

      /* Style error messages */
      .error {
          color: #ff0000;
          font-size: 12px;
          display: block;
          margin-top: 5px;
      }

      /* Add some spacing between form groups */
      .form-group {
          margin-bottom: 20px;
      }

      #btn-find{
        background-color: #201658; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
      }

      #btn-use{
        background-color: #201658; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
      }


      .toggle-switch {
        position: relative;
        display: flex;
        align-items:center;
        width: 40px;
        height: 24px;
        margin: 10px;
      }

      .location-text {
          margin-left: 5px; /* Adjust margin as needed */
      }

      .toggle-switch .toggle-input {
        display: none;
      }


      .toggle-switch .toggle-label {
        position: absolute;
        top: 0;
        left: 0;
        width: 40px;
        height: 24px;
        background-color: #2196F3;
        border-radius: 34px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .toggle-switch .toggle-label::before {
        content: "";
        position: absolute;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        background-color: #fff;
        box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s;
      }

      .toggle-switch .toggle-input:checked + .toggle-label {
        background-color: #4CAF50;
      }

      .toggle-switch .toggle-input:checked + .toggle-label::before {
        transform: translateX(16px);
      }

      /* Light tema */
      .toggle-switch.light .toggle-label {
        background-color: #BEBEBE;
      }

      .toggle-switch.light .toggle-input:checked + .toggle-label {
        background-color: #9B9B9B;
      }

      .toggle-switch.light .toggle-input:checked + .toggle-label::before {
        transform: translateX(6px);
      }

      /* Dark tema */
      .toggle-switch.dark .toggle-label {
        background-color: #4B4B4B;
      }

      .toggle-switch.dark .toggle-input:checked + .toggle-label {
        background-color: #717171;
      }

      .toggle-switch.dark .toggle-input:checked + .toggle-label::before {
        transform: translateX(16px);
      }
    </style>
  </head>

  <body style="'font-family:Poppins,sans-serif';background:black;">
    <!-- header section start -->
    <div class="header_section">
      <div class="container-fluid">
        <nav
          class="navbar navbar-expand-lg navbar-light bg-light fixed-top-navbar"
        >
          <a class="logo" href="{% url 'index' %}"
            ><img
              style="width: 50px; margin-left: 50px"
              src="{% static 'images/logo2.jpg' %}"
          /></a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto mt-3">
              {% if user.is_authenticated %} {% comment %}
              <li class="nav-item active">
                <a class="nav-link" href="{% url 'index' %}">Home</a>
              </li>
              {% endcomment %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'about' %}">About Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'general' %}"
                  >General Information</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'laws' %}">Laws</a>
              </li>
              {% comment %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'gallery' %}">Gallery</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'contact' %}">Contacts</a>
              </li>
              {% endcomment %} {% comment %}
              <div class="navbar-nav ml-auto">
                <div class="nav-item dropdown">
                  <a
                    href="reportcrime"
                    class="nav-link dropdown-toggle"
                    data-toggle="dropdown"
                    >Your Activity</a
                  >
                  <div class="dropdown-menu">
                    <a href="{% url 'crime_category' %}" class="dropdown-item"
                      >Report a Crime</a
                    >
                    <a href="{% url 'listcrime' %}" class="dropdown-item"
                      >View Crime Status</a
                    >
                  </div>
                </div>
              </div>
              {% endcomment %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'crime_category' %}"
                  >Report a crime</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'listcrime' %}"
                  >View Crime Status</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}">Logout</a><br />
              </li>
              <li class="nav-item">
                <a class="nav-link"
                  ><img style="width:30px;height:40px;" src= {% static
                  "images/user.jpg" %}> {{ user.name }}</a
                >
                {% else %}
              </li>
              <li class="nav-item">
                <a class="nav-link" href="http://127.0.0.1:8000/userregister"
                  >Register</a
                >
              </li>
              {% comment %}
              <div class="navbar-nav ml-auto">
                <div class="nav-item dropdown">
                  <a
                    href="#"
                    class="nav-link dropdown-toggle"
                    data-toggle="dropdown"
                    >User Account</a
                  >
                  <div class="dropdown-menu">
                    <a
                      href="http://127.0.0.1:8000/witnessregister"
                      class="dropdown-item"
                      >Register as Witness</a
                    >
                    <a
                      href="http://127.0.0.1:8000/victimregister"
                      class="dropdown-item"
                      >Register as Victim</a
                    >
                  </div>
                </div>
              </div>
              {% endcomment %} {% comment %}
              <li class="nav-item">
                <a class="nav-link" href="http://127.0.0.1:8000/register"
                  >Register</a
                >
              </li>
              {% endcomment %}
              <li class="nav-item">
                <a class="nav-link" href="http://127.0.0.1:8000/login">Login</a>
              </li>
              {% endif %} {% comment %}
              <h2>User: {{user.name}}</h2>
              {% endcomment %}
            </ul>
            <!-- <form class="form-inline my-2 my-lg-0">
                   <div class="login_menu">
                      <ul>
                         <li><a href="#">Login</a></li>
                         <li><a href="#">Register</a></li>
                         <li><a href="#"><img src="images/user-icon.png"></a></li>
                         <li><a href="#"><img src="images/search-icon.png"></a></li>
                      </ul>
                   </div>
                </form> -->
          </div>
        </nav>
      </div>
    </div>

    <br /><br /><br /><br /><br />
    <button
      onclick="goBack()"
      style="
        background-color: #f3b95f; /* Green */
        border: none;
        color: white;
        padding: 10px 20px;
        margin-left: 79px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        cursor: pointer;
        border-radius: 4px;
      "
    >
      <i class="fa fa-arrow-circle-left" aria-hidden="true"></i>
      Go Back
    </button>
    {% comment %}
    <form
      id="reportform"
      method="post"
      action="{% url 'find_police_stations' %}"
    >
      <h2>Enter Your Location</h2>
      {% csrf_token %} Latitude:
      <input type="text" name="latitude" /><br /><br />
      Longitude: <input type="text" name="longitude" /><br /><br />
      <input
        type="submit"
        style="
          box-shadow: 0 12px 16px 0 rgba(0, 0, 0, 0.24),
            0 17px 50px 0 rgba(0, 0, 0, 0.19);
        "
        value="FIND NEARBY POLICE STATIONS"
      />
    </form>
    {% endcomment %}

    <form
      id="reportform"
      method="post"
      action="{% url 'find_police_stations' %}"
    >
      <h2 style="margin-left: 30%">Find Your Nearby Police Stations</h2>
      {% csrf_token %}<br />

      <div class="d-flex align-items-center" style="width: 100%">
        <div class="toggle-switch" style="margin-left: 35%">
          <input
            class="toggle-input"
            id="toggle"
            type="checkbox"
            onclick="toggleSubmitAndLocation()"
          />
          <label class="toggle-label" for="toggle"></label>
        </div>
        <span class="location-text" style="margin-top: 20px"
          >Use Current Location</span
        >
      </div>
      <br />

      <input type="hidden" name="latitude" id="latitude" />
      <input type="hidden" name="longitude" id="longitude" />
      
      <a href="{% url 'location' %}"><button
        type="submit"
        id="btn-find"
        style="margin-left: 31%; border-radius: 4px"
        value="FIND NEARBY POLICE STATION"
        disabled
        title="Please enable your location first"
      />FIND NEARBY POLICE STATION</button></a>
    </form>

    <script>
      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }

      function showPosition(position) {
        document.getElementById("latitude").value = position.coords.latitude;
        document.getElementById("longitude").value = position.coords.longitude;
      }

      function toggleSubmitAndLocation() {
        var toggle = document.getElementById("toggle");
        var submitButton = document.getElementById("btn-find");

        if (toggle.checked) {
          getLocation();
          submitButton.disabled = false;
        } else {
          submitButton.disabled = true;
        }
      }
    </script>

    <script>
      function goBack() {
        window.history.back();
      }
    </script>
  </body>
</html>
